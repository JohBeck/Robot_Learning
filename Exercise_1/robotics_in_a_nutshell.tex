%---------------------------------------------
%---------------------------------------------
%---------------------------------------------
%---------------------------------------------
\exercise{Robotics in a Nutshell}
You are considering to buy a new multi-purpose robot platform. Its kinematic chain has two rotational $q_{\{1,3\}}$ and two linear $q_{\{2,4\}}$ degrees of freedom (DoFs), as shown in the figure below. These four joints are actuated with forces and torques of $u_i$, $i\in\{1,2,3,4\}$. A gripper is mounted on the end of the robot, indicated by the letter \textbf{E}. The robot's base is mounted on a table. We assume that the base Cartesian coordinates at the mount are $x_\textrm{base}=[0,0,0]$.  

\begin{center}
  % \includegraphics[width=0.35\textwidth]{fig/S-bot_B} 
\end{center}


\begin{questions}

%----------------------------------------------

\begin{question}{Forward Kinematics}{2}
Compute the kinematic transformation in the global coordinate system from the base $\vec{x_\textrm{base}}$ to the end-effector \textbf{E}.  
Write the solution for the $\vec{x_\textrm{end-eff}}=[x,y,z]^T$  according to the joint values $q_i$, where $i \in \{1,2,3,4\}$.

\begin{answer}
The kinematic transformation in global coordinates from  $\vec{x_\textrm{base}}$ to the end-effector \textbf{E} can be computed and simplyfied to
\begin{align*}
~^\textrm{base}\!T_{\textrm{end-eff}} &= 
%\begin{bmatrix}
%1 & 0 & 0 & 0 \\
%0 & 1 & 0 & 0 \\
%0 & 0 & 1 & \textrm{l}_{\textrm{1}} \\
%0 & 0 & 0 & 1 
%\end{bmatrix}
%\cdot [...]\\ 
%TODO: restliche Matrizen auch aufschreiben?
\begin{bmatrix}
\cos(\textrm{q}_{\textrm{1}}+\textrm{q}_{\textrm{3}}) & -\sin(\textrm{q}_{\textrm{1}}+\textrm{q}_{\textrm{3}})& 0 & \textrm{q}_{\textrm{4}}\cos(\textrm{q}_{\textrm{1}}+\textrm{q}_{\textrm{3}}) + \textrm{q}_{\textrm{2}}\cos(\textrm{q}_{\textrm{1}}) \\
\sin(\textrm{q}_{\textrm{1}}+\textrm{q}_{\textrm{3}}) &\cos(\textrm{q}_{\textrm{1}}+\textrm{q}_{\textrm{3}})  & 0 & \textrm{q}_{\textrm{4}}\sin(\textrm{q}_{\textrm{1}}+\textrm{q}_{\textrm{3}}) + \textrm{q}_{\textrm{2}}\sin(\textrm{q}_{\textrm{1}}) \\
0 & 0 & 1 & \textrm{l}_{\textrm{1}} \\
0 & 0 & 0 & 1 
\end{bmatrix}
\end{align*}.

With that the position of the end-efector $\vec{x_\textrm{end-eff}}=[x,y,z]^T$ results to

\begin{align*}
\vec{x_\textrm{end-eff}}=[x,y,z]^T = \begin{bmatrix}
\textrm{q}_{\textrm{4}}\cos(\textrm{q}_{\textrm{1}}+\textrm{q}_{\textrm{3}}) + \textrm{q}_{\textrm{2}}\cos(\textrm{q}_{\textrm{1}}) \\
\textrm{q}_{\textrm{4}}\sin(\textrm{q}_{\textrm{1}}+\textrm{q}_{\textrm{3}}) + \textrm{q}_{\textrm{2}}\sin(\textrm{q}_{\textrm{1}}) \\
\textrm{l}_{\textrm{1}} 
\end{bmatrix}
\end{align*}.

\end{answer}
\end{question}

%----------------------------------------------

\begin{question}{Inverse Kinematics}{2}
Define briefly in your own words the inverse kinematics problem in robotics.  
Can we always accurately model the inverse kinematics of a robot with a
function?

\begin{answer}
The problem with the inverse kinematics is that the calculation for the parameters is very costly because you have to solve a non-linear equation system each step. This is why in a lot of cases the only way to solve this is a numerical solution but not a analytical(funciton). Also there are often multiple possible solutions for a robot to reach a specific position. So therefor a solution in form of a function isn't even possible.
\end{answer}

\end{question}

%----------------------------------------------

\begin{question}{Differential Kinematics}{4}
Compute the Jacobian matrix $\vec{J}(\vec{q})$ of the robot such that $\dot{\vec{x}}=\vec{J}(\vec{q})\dot{\vec{q}}$, where $\dot{\vec{q}}$ is the first time derivatives of the state vector $\vec{q}$ of the robot. Explain in a sentence the physical meaning of the Jacobian. 

\begin{answer}
For the differential kinematics we can compute the Jacobian matrix to
\begin{align*}
\vec{J}(\vec{q}) = 
%Jacobian
\begin{bmatrix}
% X --------------------------
-\textrm{q}_{\textrm{4}}\sin(\textrm{q}_{\textrm{1}}+\textrm{q}_{\textrm{3}}) + \textrm{q}_{\textrm{2}}\sin(\textrm{q}_{\textrm{1}}) &
\cos(\textrm{q}_{\textrm{1}}) &
-\textrm{q}_{\textrm{4}}\sin(\textrm{q}_{\textrm{1}}+\textrm{q}_{\textrm{3}})&
\cos(\textrm{q}_{\textrm{1}}+\textrm{q}_{\textrm{3}})\\
% Y --------------------------
\textrm{q}_{\textrm{4}}\cos(\textrm{q}_{\textrm{1}}+\textrm{q}_{\textrm{3}}) + \textrm{q}_{\textrm{2}}\cos(\textrm{q}_{\textrm{1}})&
\sin(\textrm{q}_{\textrm{1}})&
\textrm{q}_{\textrm{4}}\cos(\textrm{q}_{\textrm{1}}+\textrm{q}_{\textrm{3}})&
\cos(\textrm{q}_{\textrm{1}}+\textrm{q}_{\textrm{3}})\\
% Z --------------------------
0 & 0 & 0 & 0 
\end{bmatrix}
\end{align*}
for $\dot{\vec{x}}=\vec{J}(\vec{q})\dot{\vec{q}}$.
%TODO: Describe what the jacobian does

\end{answer}

\end{question}

%----------------------------------------------

\begin{question}{Singularities}{3}
What is the kinematic singularity in robotics? How can you detect it? When does our robotic arm, which was defined above, enter a kinematic singularity?

\begin{answer}
So called kinematic singularities are positions, where the colums of the jabobian matrix become linear dependent. This leads to a loss of degrees of freedom %TODO: Not finished yet

\end{answer}

\end{question}

%----------------------------------------------

\begin{question}{Workspace}{1}
If your task is to sort items placed on a table, would you buy this robot? Briefly justify your answer.

\begin{answer}
We wouldn't buy this robot because its workspace is a plane, parallel to the table(distance L1). So since the robot can't reach any point outside his workspace it isn't able to reach the tableplate. So it can't do it's purpose and therefor is not a good buy for this task.
\end{answer}

\end{question}

\end{questions}
